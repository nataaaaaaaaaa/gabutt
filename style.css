/* =====================================================
   MUSEUM OF US â€” style.css  (Luxury Upgrade)
   ===================================================== */

/* ======= THEMES ======= */
[data-theme="ivory"]    { --bg:#faf8f5;--bg2:#f2ede6;--bg3:#ece5d8;--surface:#fff;--gold:#c9a96e;--gold-l:#e8d5b0;--gold-d:#b8935a;--text:#2a2520;--muted:#8c7f72;--border:rgba(180,160,120,.22);--shadow:rgba(100,80,50,.12);--nav-bg:rgba(250,248,245,.94);--modal-bg:rgba(20,16,12,.93);--ph1:#f2ede6;--ph2:#ece5d8;--film-bg:#1a1208;--film-hole:#0d0905; }
[data-theme="rose"]     { --bg:#fff8f8;--bg2:#fceef0;--bg3:#f9e0e4;--surface:#fff;--gold:#d4758a;--gold-l:#f0b8c4;--gold-d:#b85570;--text:#2a1520;--muted:#9c707a;--border:rgba(200,140,155,.22);--shadow:rgba(180,80,100,.10);--nav-bg:rgba(255,248,248,.94);--modal-bg:rgba(30,10,15,.93);--ph1:#fceef0;--ph2:#f9e0e4;--film-bg:#1a0810;--film-hole:#100508; }
[data-theme="midnight"] { --bg:#12111a;--bg2:#1c1b28;--bg3:#252438;--surface:#1e1d2e;--gold:#c9a96e;--gold-l:#9b7d4e;--gold-d:#e8c88a;--text:#ede8e0;--muted:#9090a8;--border:rgba(201,169,110,.18);--shadow:rgba(0,0,0,.40);--nav-bg:rgba(18,17,26,.97);--modal-bg:rgba(5,5,10,.96);--ph1:#1c1b28;--ph2:#252438;--film-bg:#09090f;--film-hole:#050508; }
[data-theme="sage"]     { --bg:#f4f7f4;--bg2:#e8f0e8;--bg3:#d8e8d8;--surface:#fff;--gold:#6a9e6e;--gold-l:#a8d0a8;--gold-d:#4a7e4e;--text:#1e2e1e;--muted:#6a8c6a;--border:rgba(100,160,100,.20);--shadow:rgba(50,100,50,.10);--nav-bg:rgba(244,247,244,.94);--modal-bg:rgba(10,20,10,.93);--ph1:#e8f0e8;--ph2:#d8e8d8;--film-bg:#0a150a;--film-hole:#060d06; }
[data-theme="lavender"] { --bg:#f7f4ff;--bg2:#ede8fa;--bg3:#ddd5f5;--surface:#fff;--gold:#8b6fd4;--gold-l:#c4b0f0;--gold-d:#6a50b8;--text:#1e1530;--muted:#7060a0;--border:rgba(140,110,210,.20);--shadow:rgba(80,60,180,.10);--nav-bg:rgba(247,244,255,.94);--modal-bg:rgba(10,5,25,.93);--ph1:#ede8fa;--ph2:#ddd5f5;--film-bg:#100a1a;--film-hole:#080510; }
[data-theme="dusk"]     { --bg:#1e1428;--bg2:#2a1e38;--bg3:#362848;--surface:#2a1e38;--gold:#e8a87c;--gold-l:#c07040;--gold-d:#ffd0a0;--text:#f0e8dc;--muted:#a898b0;--border:rgba(232,168,124,.18);--shadow:rgba(0,0,0,.45);--nav-bg:rgba(30,20,40,.97);--modal-bg:rgba(5,0,10,.96);--ph1:#2a1e38;--ph2:#362848;--film-bg:#100812;--film-hole:#08050a; }

/* ======= BASE ======= */
:root{ --font-serif:'Cormorant Garamond',Georgia,serif; --font-sans:'Jost',sans-serif; --font-script:'Great Vibes',cursive; --tr:.45s cubic-bezier(.4,0,.2,1); }
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
body{font-family:var(--font-sans);background:var(--bg);color:var(--text);overflow-x:hidden;min-height:100vh;transition:background .5s,color .5s;cursor:none;}
a{color:inherit;}
.hidden{display:none!important;}
.grain-overlay{position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.04'/%3E%3C/svg%3E");pointer-events:none;z-index:0;opacity:.5;}

/* ======= CURSOR ======= */
#cursorCanvas{position:fixed;inset:0;pointer-events:none;z-index:99999;}

/* ======= LOGIN ======= */
.login-screen{position:fixed;inset:0;z-index:9000;background:linear-gradient(160deg,var(--bg) 0%,var(--bg2) 50%,var(--bg) 100%);display:flex;align-items:center;justify-content:center;transition:opacity .5s ease,background .5s;}
.login-screen.fade-out{opacity:0;pointer-events:none;}
.login-canvas{position:absolute;inset:0;pointer-events:none;}
.login-frame{position:absolute;width:55px;height:55px;border-color:var(--gold-l);border-style:solid;opacity:.6;transition:border-color .5s;}
.login-frame.tl{top:28px;left:28px;border-width:1px 0 0 1px;} .login-frame.tr{top:28px;right:28px;border-width:1px 1px 0 0;}
.login-frame.bl{bottom:28px;left:28px;border-width:0 0 1px 1px;} .login-frame.br{bottom:28px;right:28px;border-width:0 1px 1px 0;}
.login-box{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:44px 40px;width:100%;max-width:420px;box-shadow:0 24px 80px var(--shadow);position:relative;z-index:2;animation:fadeUp .8s ease forwards;transition:background .5s,border-color .5s;}
.login-brand{text-align:center;margin-bottom:28px;}
.login-script{font-family:var(--font-script);font-size:2rem;color:var(--gold);margin-bottom:8px;transition:color .5s;}
.login-title{font-family:var(--font-serif);font-size:2rem;font-weight:300;color:var(--text);margin-bottom:6px;transition:color .5s;}
.login-sub{font-family:var(--font-sans);font-size:.78rem;font-weight:200;color:var(--muted);letter-spacing:.06em;transition:color .5s;}
.login-tabs{display:flex;margin-bottom:26px;border:1px solid var(--border);border-radius:6px;overflow:hidden;transition:border-color .5s;}
.ltab{flex:1;padding:10px;background:transparent;border:none;cursor:pointer;font-family:var(--font-sans);font-size:.7rem;font-weight:300;letter-spacing:.14em;text-transform:uppercase;color:var(--muted);transition:all .25s;}
.ltab.active{background:var(--gold);color:#fff;}
.ltab:hover:not(.active){background:var(--bg2);color:var(--text);}
.lform{display:flex;flex-direction:column;gap:18px;}
.lfield{display:flex;flex-direction:column;gap:6px;}
.lfield label{font-family:var(--font-sans);font-size:.6rem;font-weight:400;letter-spacing:.2em;text-transform:uppercase;color:var(--muted);transition:color .5s;}
.lfield input,.lpw-input{padding:12px 14px;background:var(--bg2);border:1px solid var(--border);border-radius:4px;font-family:var(--font-sans);font-size:.85rem;font-weight:300;color:var(--text);outline:none;transition:border-color .25s,background .5s,color .5s;width:100%;}
.lfield input:focus,.lpw-input:focus{border-color:var(--gold);}
.lfield input::placeholder,.lpw-input::placeholder{color:var(--muted);opacity:.6;}
.pw-wrap{position:relative;}
.pw-wrap input{width:100%;padding-right:42px;}
.pw-toggle{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:none;font-size:.9rem;opacity:.5;transition:opacity .2s;padding:0;}
.pw-toggle:hover{opacity:1;}
.lerror{font-family:var(--font-sans);font-size:.72rem;color:#e05050;min-height:18px;text-align:center;letter-spacing:.04em;}
.lbtn{padding:14px;background:var(--gold);border:none;border-radius:4px;color:#fff;font-family:var(--font-sans);font-size:.75rem;font-weight:400;letter-spacing:.2em;text-transform:uppercase;cursor:none;transition:opacity .25s,transform .2s;margin-top:4px;}
.lbtn:hover{opacity:.88;transform:translateY(-1px);}
.login-ornament{display:flex;align-items:center;gap:10px;justify-content:center;margin-top:28px;}
.orn-line{flex:1;height:1px;background:linear-gradient(to right,transparent,var(--gold-l));max-width:50px;}
.orn-line:last-child{background:linear-gradient(to left,transparent,var(--gold-l));}
.orn-diamond{font-size:.5rem;color:var(--gold-l);}

/* ======= PARTICLES ======= */
.particle-canvas{position:fixed;inset:0;pointer-events:none;z-index:1;opacity:0;transition:opacity .8s;}
.particle-canvas.active{opacity:1;}

/* ======= THEME FAB ======= */
.theme-fab{position:fixed;top:88px;right:20px;z-index:500;width:44px;height:44px;border-radius:50%;background:var(--surface);border:1px solid var(--border);box-shadow:0 4px 20px var(--shadow);display:flex;align-items:center;justify-content:center;font-size:1.2rem;cursor:none;transition:transform .3s,background .5s,border-color .5s;}
.theme-fab:hover{transform:scale(1.1) rotate(20deg);}
.theme-panel{position:fixed;top:140px;right:20px;z-index:499;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 16px;box-shadow:0 8px 40px var(--shadow);min-width:180px;transform:scale(.9) translateY(-10px);opacity:0;pointer-events:none;transition:transform .3s cubic-bezier(.34,1.56,.64,1),opacity .25s,background .5s,border-color .5s;transform-origin:top right;}
.theme-panel.open{transform:scale(1) translateY(0);opacity:1;pointer-events:all;}
.theme-panel-title{font-family:var(--font-sans);font-size:.6rem;font-weight:400;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:14px;padding-bottom:10px;border-bottom:1px solid var(--border);}
.theme-options{display:flex;flex-direction:column;gap:6px;}
.theme-opt{display:flex;align-items:center;gap:10px;padding:8px 10px;border-radius:8px;background:transparent;border:1px solid transparent;cursor:none;width:100%;font-family:var(--font-sans);font-size:.75rem;font-weight:300;color:var(--muted);transition:all .25s;text-align:left;}
.theme-opt:hover{background:var(--bg2);border-color:var(--border);color:var(--text);}
.theme-opt.active{background:var(--bg2);border-color:var(--gold);color:var(--text);}
.theme-swatch{width:22px;height:22px;border-radius:50%;flex-shrink:0;border:1px solid rgba(0,0,0,.08);display:inline-block;}

/* ======= MUSIC PLAYER ======= */
.mp-bar{position:fixed;bottom:12px;left:12px;z-index:400;display:flex;flex-direction:column;align-items:flex-start;gap:8px;}
.mp-pill{display:flex;align-items:center;gap:6px;background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:6px 10px;box-shadow:0 6px 28px var(--shadow);backdrop-filter:blur(14px);transition:background .5s,border-color .5s;user-select:none;min-width:160px;}
.mp-pill-play{width:30px;height:30px;border-radius:10px;background:var(--gold);border:none;cursor:none;display:flex;align-items:center;justify-content:center;font-size:.8rem;color:#fff;transition:opacity .2s,transform .2s,background .5s;flex-shrink:0;}
.mp-pill-play:hover{opacity:.88;transform:scale(1.04);}
.mp-pill-prev,.mp-pill-next{display:none;}
.mp-pill-info{display:flex;align-items:center;gap:6px;min-width:90px;max-width:130px;padding:0;}
.mp-pill-title{font-family:var(--font-sans);font-size:.6rem;font-weight:300;letter-spacing:.08em;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;transition:color .5s;}
.mp-pill-bars{display:flex;align-items:flex-end;gap:2px;height:12px;opacity:0;transition:opacity .3s;}
.mp-pill-bars span{width:3px;border-radius:2px;background:var(--gold);display:block;transition:background .5s;}
.mp-pill-bars span:nth-child(1){height:6px;animation:bar1 .8s ease infinite;}
.mp-pill-bars span:nth-child(2){height:12px;animation:bar2 .9s ease infinite .15s;}
.mp-pill-bars span:nth-child(3){height:8px;animation:bar1 .7s ease infinite .3s;}
.mp-pill-bars span:nth-child(4){height:10px;animation:bar2 1s ease infinite .1s;}
.mp-bar.is-playing .mp-pill-bars{opacity:1;}
.mp-pill-open{background:none;border:none;cursor:none;font-size:.85rem;color:var(--muted);padding:0;transition:color .2s;flex-shrink:0;}
.mp-pill-open:hover{color:var(--gold);}
.mp-panel{width:300px;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px;box-shadow:0 12px 48px var(--shadow);backdrop-filter:blur(16px);transform:scale(.92) translateY(8px);opacity:0;pointer-events:none;transition:transform .35s cubic-bezier(.34,1.56,.64,1),opacity .25s,background .5s,border-color .5s;transform-origin:bottom left;}
.mp-bar.panel-open .mp-panel{transform:scale(1) translateY(0);opacity:1;pointer-events:all;}
.mp-panel-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;}
.mp-panel-title{font-family:var(--font-sans);font-size:.62rem;font-weight:400;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);transition:color .5s;}
.mp-panel-close{background:none;border:none;cursor:none;font-size:.8rem;color:var(--muted);transition:color .2s;}
.mp-panel-close:hover{color:var(--text);}
.mp-progress-wrap{display:flex;align-items:center;gap:8px;margin-bottom:10px;}
.mp-time{font-family:var(--font-sans);font-size:.58rem;color:var(--muted);min-width:28px;transition:color .5s;}
.mp-progress-track{flex:1;height:4px;border-radius:2px;background:var(--bg2);position:relative;cursor:none;transition:background .5s;}
.mp-progress-fill{height:100%;border-radius:2px;background:var(--gold);width:0%;transition:background .5s;}
.mp-progress-thumb{position:absolute;top:50%;right:-6px;width:12px;height:12px;border-radius:50%;background:var(--gold);transform:translateY(-50%) scale(0);transition:transform .2s,background .5s;}
.mp-progress-track:hover .mp-progress-thumb{transform:translateY(-50%) scale(1);}
.mp-vol-row{display:flex;align-items:center;gap:6px;margin-bottom:14px;font-size:.8rem;}
.mp-volume{flex:1;-webkit-appearance:none;appearance:none;height:3px;border-radius:2px;background:var(--bg2);outline:none;cursor:none;transition:background .5s;}
.mp-volume::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;border-radius:50%;background:var(--gold);cursor:none;}
.mp-slots{display:flex;flex-direction:column;gap:6px;max-height:260px;overflow-y:auto;padding-right:2px;}
.mp-slots::-webkit-scrollbar{width:3px;} .mp-slots::-webkit-scrollbar-thumb{background:var(--gold-l);border-radius:2px;}
.mp-slot{display:flex;align-items:center;gap:10px;padding:9px 10px;border-radius:8px;border:1px solid var(--border);background:var(--bg);transition:background .25s,border-color .25s;cursor:none;}
.mp-slot:hover{background:var(--bg2);border-color:var(--gold-l);}
.mp-slot.active{background:var(--bg2);border-color:var(--gold);}
.mp-slot-num{font-family:var(--font-sans);font-size:.58rem;color:var(--muted);min-width:14px;text-align:center;transition:color .5s;}
.mp-slot.active .mp-slot-num{color:var(--gold);}
.mp-slot-name{font-family:var(--font-sans);font-size:.72rem;font-weight:300;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;transition:color .5s;}
.mp-slot-dot{width:6px;height:6px;border-radius:50%;background:var(--gold);flex-shrink:0;opacity:0;transition:opacity .2s,background .5s;}
.mp-slot.active .mp-slot-dot{opacity:1;}

/* ======= NAV ======= */
.museum-nav{position:fixed;top:0;left:0;right:0;z-index:100;padding:0 48px;height:68px;display:flex;align-items:center;gap:40px;background:var(--nav-bg);backdrop-filter:blur(18px);border-bottom:1px solid var(--border);transform:translateY(-100%);transition:transform var(--tr),box-shadow .3s,background .5s,border-color .5s;}
.museum-nav.visible{transform:translateY(0);}
.nav-logo{font-family:var(--font-script);font-size:1.6rem;color:var(--gold);white-space:nowrap;transition:color .5s;}
.nav-links{display:flex;gap:28px;list-style:none;}
.nav-link{font-family:var(--font-sans);font-size:.68rem;font-weight:300;letter-spacing:.14em;text-transform:uppercase;text-decoration:none;color:var(--muted);position:relative;padding-bottom:2px;transition:color .3s;}
.nav-link::after{content:'';position:absolute;bottom:0;left:0;width:0;height:1px;background:var(--gold);transition:width .35s;}
.nav-link:hover,.nav-link.active{color:var(--text);}
.nav-link:hover::after,.nav-link.active::after{width:100%;}
.nav-user-area{display:flex;align-items:center;gap:12px;margin-left:auto;}
.nav-username{font-family:var(--font-sans);font-size:.68rem;font-weight:300;letter-spacing:.1em;color:var(--muted);transition:color .5s;}
.nav-logout{background:transparent;border:1px solid var(--border);color:var(--muted);font-family:var(--font-sans);font-size:.62rem;font-weight:300;letter-spacing:.1em;padding:6px 12px;border-radius:3px;cursor:none;transition:all .25s;}
.nav-logout:hover{border-color:var(--gold);color:var(--text);}

/* ======= PAGES ======= */
.page{min-height:100vh;display:none;opacity:0;transform:translateY(16px);transition:opacity .55s ease,transform .55s ease;}
.page.active{display:block;}
.page.visible{opacity:1;transform:translateY(0);}

/* ======= PAGE HEADER ======= */
.page-header{padding:110px 48px 60px;text-align:center;border-bottom:1px solid var(--border);position:relative;transition:border-color .5s;}
.page-header::after{content:'';position:absolute;bottom:-1px;left:50%;transform:translateX(-50%);width:60px;height:2px;background:var(--gold);transition:background .5s;}
.page-label{font-family:var(--font-sans);font-size:.6rem;font-weight:400;letter-spacing:.3em;text-transform:uppercase;color:var(--gold);display:block;margin-bottom:16px;transition:color .5s;}
.page-title{font-family:var(--font-serif);font-size:clamp(2.8rem,6vw,5rem);font-weight:300;color:var(--text);margin-bottom:16px;line-height:1.1;transition:color .5s;}
.page-desc{font-family:var(--font-sans);font-size:.88rem;font-weight:200;color:var(--muted);letter-spacing:.06em;transition:color .5s;}

/* ======= LANDING ======= */
#page-landing{padding:0;}
.landing-bg{min-height:100vh;background:radial-gradient(ellipse 80% 60% at 30% 40%,rgba(201,169,110,.06) 0%,transparent 60%),linear-gradient(160deg,var(--bg) 0%,var(--bg2) 50%,var(--bg) 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden;transition:background .5s;}
.landing-frames .lf{position:absolute;width:70px;height:70px;border-color:var(--gold-l);border-style:solid;opacity:.55;transition:border-color .5s;}
.lf.tl{top:32px;left:32px;border-width:1px 0 0 1px;} .lf.tr{top:32px;right:32px;border-width:1px 1px 0 0;}
.lf.bl{bottom:32px;left:32px;border-width:0 0 1px 1px;} .lf.br{bottom:32px;right:32px;border-width:0 1px 1px 0;}
.landing-content{text-align:center;position:relative;z-index:2;animation:fadeUp 1.2s ease forwards;opacity:0;}
.landing-eyebrow{display:flex;align-items:center;gap:14px;justify-content:center;margin-bottom:32px;}
.ey-line{width:50px;height:1px;background:var(--gold-l);transition:background .5s;}
.ey-badge{font-family:var(--font-sans);font-size:.6rem;font-weight:300;letter-spacing:.32em;text-transform:uppercase;color:var(--gold);transition:color .5s;}
.landing-title{display:flex;flex-direction:column;align-items:center;gap:4px;margin-bottom:28px;}
.lt-serif{font-family:var(--font-serif);font-weight:300;font-size:clamp(5rem,12vw,10rem);line-height:.9;color:var(--text);display:block;transition:color .5s;}
.lt-script{font-family:var(--font-script);font-size:clamp(3.5rem,8vw,7rem);color:var(--gold);display:block;line-height:1;transition:color .5s;}
.landing-sub{font-family:var(--font-sans);font-size:.9rem;font-weight:200;letter-spacing:.08em;color:var(--muted);line-height:1.8;margin-bottom:44px;transition:color .5s;}
.cta-btn{display:inline-flex;align-items:center;gap:12px;padding:15px 38px;background:transparent;border:1px solid var(--gold);color:var(--text);font-family:var(--font-sans);font-size:.72rem;font-weight:300;letter-spacing:.18em;text-transform:uppercase;cursor:none;border-radius:2px;transition:all .35s;position:relative;overflow:hidden;}
.cta-btn::before{content:'';position:absolute;inset:0;background:var(--gold);transform:scaleX(0);transform-origin:left;transition:transform .4s ease;z-index:0;}
.cta-btn:hover::before{transform:scaleX(1);}
.cta-btn:hover{color:#fff;}
.cta-btn span,.cta-btn svg{position:relative;z-index:1;}
.landing-scroll-hint{position:absolute;bottom:32px;left:50%;transform:translateX(-50%);display:flex;flex-direction:column;align-items:center;gap:8px;z-index:2;animation:fadeUp 2s ease forwards;opacity:0;animation-delay:.8s;}
.landing-scroll-hint span{font-family:var(--font-sans);font-size:.55rem;letter-spacing:.25em;text-transform:uppercase;color:var(--muted);transition:color .5s;}
.scroll-line{width:1px;height:40px;background:linear-gradient(to bottom,var(--gold-l),transparent);animation:scrollPulse 2s ease infinite;}

/* ======= FILM STRIP ======= */
.film-strip-top,.film-strip-bottom{background:var(--film-bg);padding:10px 0;transition:background .5s;overflow:hidden;}
.film-holes{display:flex;gap:20px;padding:0 20px;}
.film-hole-item{width:28px;height:22px;border-radius:4px;background:var(--film-hole);border:1px solid rgba(255,255,255,.05);flex-shrink:0;transition:background .5s,border-color .5s;}

/* ======= TIMELINE ======= */
.timeline-container{max-width:960px;margin:0 auto;padding:70px 24px 100px;position:relative;}
.timeline-line{position:absolute;left:50%;top:0;bottom:0;width:1px;background:linear-gradient(to bottom,transparent,var(--gold-l) 8%,var(--gold-l) 92%,transparent);transform:translateX(-50%);transition:background .5s;}
.timeline-item{display:flex;margin-bottom:72px;position:relative;opacity:0;transition:opacity .7s ease,transform .7s ease;}
.timeline-item[data-side="left"]{justify-content:flex-end;padding-right:calc(50% + 52px);transform:translateX(-30px);}
.timeline-item[data-side="right"]{justify-content:flex-start;padding-left:calc(50% + 52px);transform:translateX(30px);}
.timeline-item.revealed{opacity:1;transform:translateX(0);}
.timeline-dot{position:absolute;left:50%;top:28px;width:14px;height:14px;border-radius:50%;background:var(--bg);border:2px solid var(--gold);transform:translateX(-50%);z-index:2;box-shadow:0 0 0 4px var(--bg);transition:transform .3s,background .3s,border-color .5s,box-shadow .5s;}
.dot-ring{position:absolute;inset:-6px;border-radius:50%;border:1px solid var(--gold-l);opacity:0;transition:opacity .3s,border-color .5s;}
.timeline-item:hover .dot-ring{opacity:1;}
.timeline-item:hover .timeline-dot{background:var(--gold);transform:translateX(-50%) scale(1.25);}
.timeline-card{background:var(--surface);border:1px solid var(--border);border-radius:4px;padding:26px;max-width:380px;width:100%;box-shadow:0 4px 28px var(--shadow);transition:transform .35s,box-shadow .35s,background .5s,border-color .5s;position:relative;}
.timeline-card:hover{transform:translateY(-6px);box-shadow:0 16px 48px var(--shadow);}
/* Film strip corner cuts */
.tc-corner{position:absolute;width:14px;height:14px;border-color:var(--gold-l);border-style:solid;opacity:.7;transition:border-color .5s;}
.tc-corner.tl{top:8px;left:8px;border-width:1px 0 0 1px;} .tc-corner.tr{top:8px;right:8px;border-width:1px 1px 0 0;}
.tc-corner.bl{bottom:8px;left:8px;border-width:0 0 1px 1px;} .tc-corner.br{bottom:8px;right:8px;border-width:0 1px 1px 0;}
.future-card{border-color:var(--gold-l)!important;background:var(--bg2)!important;}
.editable{outline:none;cursor:text;border-radius:2px;transition:background .2s;}
.editable:hover{background:rgba(128,128,128,.06);}
.editable:focus{background:rgba(128,128,128,.1);}
.timeline-date{font-family:var(--font-sans);font-size:.6rem;font-weight:400;letter-spacing:.22em;text-transform:uppercase;color:var(--gold);margin-bottom:14px;display:block;transition:color .5s;}
.timeline-img-wrap{width:100%;aspect-ratio:16/9;border-radius:2px;overflow:hidden;margin-bottom:18px;background:var(--bg2);position:relative;transition:background .5s;}
.tl-photo-zone{width:100%;height:100%;position:relative;cursor:none;}
.tl-file-input{position:absolute;inset:0;opacity:0;width:100%;height:100%;cursor:none;z-index:5;}
.tl-placeholder{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;font-size:2.2rem;background:linear-gradient(135deg,var(--ph1),var(--ph2));transition:filter .25s,background .5s;}
.tl-placeholder small{font-family:var(--font-sans);font-size:.62rem;letter-spacing:.1em;color:var(--gold);font-style:italic;transition:color .5s;}
.tl-placeholder.special{background:linear-gradient(135deg,var(--bg3),var(--ph2));}
.tl-photo-zone:hover .tl-placeholder{filter:brightness(.93);}
.timeline-heading{font-family:var(--font-serif);font-size:1.35rem;font-weight:400;color:var(--text);margin-bottom:10px;display:block;transition:color .5s;}
.timeline-text{font-family:var(--font-sans);font-size:.82rem;font-weight:300;color:var(--muted);line-height:1.8;display:block;transition:color .5s;}

/* ======= POLAROID GALLERY ======= */
.polaroid-board{min-height:80vh;padding:60px 40px 100px;background:var(--bg2);position:relative;transition:background .5s;}
.polaroid-wrap{position:absolute;cursor:none;user-select:none;transition:filter .3s;will-change:transform;}
.polaroid-wrap:hover{filter:brightness(1.04);z-index:50!important;}
.polaroid{background:#fff;padding:14px 14px 50px;box-shadow:0 8px 32px rgba(0,0,0,.2),0 2px 8px rgba(0,0,0,.12);border-radius:2px;position:relative;width:200px;transition:box-shadow .3s;}
.polaroid-wrap:hover .polaroid{box-shadow:0 20px 60px rgba(0,0,0,.28),0 4px 16px rgba(0,0,0,.15);}
.polaroid-img-area{width:100%;aspect-ratio:1;background:var(--ph1);overflow:hidden;position:relative;transition:background .5s;}
.polaroid-img{width:100%;height:100%;object-fit:cover;display:none;}
.polaroid-img-area.has-photo .polaroid-img{display:block;}
.polaroid-empty-icon{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:2.5rem;transition:opacity .3s;}
.polaroid-img-area.has-photo .polaroid-empty-icon{opacity:0;pointer-events:none;}
.polaroid-caption-area{position:absolute;bottom:0;left:14px;right:14px;height:46px;display:flex;align-items:center;justify-content:center;}
.polaroid-caption{font-family:'Caveat',var(--font-serif);font-size:.82rem;font-style:italic;color:#555;text-align:center;outline:none;cursor:text;width:100%;background:transparent;border:none;resize:none;line-height:1.3;font-family:var(--font-serif);}
.polaroid-actions{position:absolute;inset:0;background:rgba(0,0,0,0);display:flex;align-items:center;justify-content:center;gap:8px;opacity:0;transition:all .3s;border-radius:0 0 0 0;}
.polaroid-wrap:hover .polaroid-actions{opacity:1;background:rgba(0,0,0,.35);}
.pol-view-btn,.pol-upload-btn{padding:7px 12px;border-radius:3px;cursor:none;font-family:var(--font-sans);font-size:.62rem;font-weight:400;letter-spacing:.08em;transition:all .2s;border:none;white-space:nowrap;}
.pol-view-btn{background:rgba(255,255,255,.18);color:#fff;border:1px solid rgba(255,255,255,.4)!important;backdrop-filter:blur(4px);}
.pol-view-btn:hover{background:rgba(255,255,255,.28);}
.pol-upload-btn{background:var(--gold);color:#fff;}
.pol-upload-btn:hover{opacity:.85;}
.polaroid-file-input{display:none;}
/* Reveal animation */
.polaroid-wrap.pol-hidden{opacity:0;transform:rotateY(90deg) scale(.8)!important;}
.polaroid-wrap.pol-reveal{transition:opacity .6s ease,transform .6s cubic-bezier(.34,1.56,.64,1)!important;}
.polaroid-wrap.pol-visible{opacity:1;}

/* ======= MAP ======= */
.map-wrap{display:grid;grid-template-columns:280px 1fr;min-height:550px;margin:0 40px 80px;border:1px solid var(--border);border-radius:8px;overflow:hidden;transition:border-color .5s;}
#leafletMap{width:100%;height:100%;min-height:550px;}
.map-sidebar{background:var(--surface);border-right:1px solid var(--border);padding:20px;display:flex;flex-direction:column;gap:12px;transition:background .5s,border-color .5s;}
.map-sidebar-title{font-family:var(--font-sans);font-size:.62rem;font-weight:400;letter-spacing:.22em;text-transform:uppercase;color:var(--gold);padding-bottom:12px;border-bottom:1px solid var(--border);transition:color .5s,border-color .5s;}
.map-pins-list{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:8px;}
.map-pin-item{padding:10px 12px;border-radius:6px;border:1px solid var(--border);background:var(--bg);cursor:none;transition:all .25s;}
.map-pin-item:hover{border-color:var(--gold);background:var(--bg2);}
.map-pin-name{font-family:var(--font-sans);font-size:.75rem;font-weight:400;color:var(--text);display:block;transition:color .5s;}
.map-pin-note{font-family:var(--font-sans);font-size:.65rem;font-weight:200;color:var(--muted);display:block;margin-top:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:color .5s;}
.map-pin-del{float:right;background:none;border:none;color:var(--muted);font-size:.7rem;cursor:none;padding:0 2px;transition:color .2s;}
.map-pin-del:hover{color:#e05050;}
.map-add-btn{background:transparent;border:1px dashed var(--border);color:var(--muted);font-family:var(--font-sans);font-size:.7rem;font-weight:300;letter-spacing:.1em;padding:10px;border-radius:6px;cursor:none;transition:all .25s;margin-top:4px;}
.map-add-btn:hover{border-color:var(--gold);color:var(--gold);}
.map-pin-form{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:600;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(6px);}
.map-pin-form.hidden{display:none!important;}
.mpf-inner{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:32px;width:100%;max-width:440px;display:flex;flex-direction:column;gap:12px;box-shadow:0 24px 80px var(--shadow);transition:background .5s,border-color .5s;}
.mpf-title{font-family:var(--font-sans);font-size:.7rem;font-weight:400;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:4px;transition:color .5s;}
.mpf-inner input,.mpf-inner textarea{padding:11px 13px;background:var(--bg2);border:1px solid var(--border);border-radius:4px;font-family:var(--font-sans);font-size:.82rem;font-weight:300;color:var(--text);outline:none;resize:vertical;transition:border-color .25s,background .5s,color .5s;}
.mpf-inner input:focus,.mpf-inner textarea:focus{border-color:var(--gold);}
.mpf-buttons{display:flex;gap:10px;}
.mpf-hint{font-family:var(--font-sans);font-size:.65rem;color:var(--muted);text-align:center;line-height:1.6;transition:color .5s;}

/* ======= MODAL ======= */
.modal-overlay{position:fixed;inset:0;background:var(--modal-bg);z-index:300;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .4s ease;backdrop-filter:blur(12px);}
.modal-overlay.open{opacity:1;pointer-events:all;}
.modal-close{position:absolute;top:28px;right:36px;background:transparent;border:1px solid rgba(255,255,255,.2);color:rgba(255,255,255,.7);width:44px;height:44px;border-radius:50%;font-size:.9rem;cursor:none;transition:all .3s;display:flex;align-items:center;justify-content:center;}
.modal-close:hover{background:rgba(255,255,255,.14);color:#fff;}
.modal-content{text-align:center;max-width:640px;width:92%;transform:scale(.88) translateY(20px);transition:transform .45s cubic-bezier(.34,1.56,.64,1);}
.modal-overlay.open .modal-content{transform:scale(1) translateY(0);}
.modal-img-wrap{border:1px solid rgba(255,255,255,.1);border-radius:4px;overflow:hidden;margin-bottom:20px;aspect-ratio:4/3;background:rgba(255,255,255,.04);display:flex;align-items:center;justify-content:center;}
.modal-img-wrap img{width:100%;height:100%;object-fit:cover;display:block;}
.modal-placeholder{font-size:8rem;}
.modal-caption{font-family:var(--font-serif);font-size:1.1rem;font-style:italic;font-weight:300;color:rgba(255,255,255,.75);letter-spacing:.04em;}

/* ======= TOAST ======= */
.toast{position:fixed;bottom:100px;left:24px;background:var(--surface);border:1px solid var(--border);padding:10px 18px;border-radius:3px;font-family:var(--font-sans);font-size:.72rem;font-weight:300;letter-spacing:.06em;color:var(--muted);box-shadow:0 4px 20px var(--shadow);opacity:0;transition:opacity .4s ease,background .5s,border-color .5s;z-index:999;pointer-events:none;max-width:260px;line-height:1.5;}
.toast.show{opacity:1;}

/* ======= KEYFRAMES ======= */
@keyframes fadeUp{from{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}
@keyframes bar1{0%,100%{transform:scaleY(.4)}50%{transform:scaleY(1)}}
@keyframes bar2{0%,100%{transform:scaleY(1)}50%{transform:scaleY(.3)}}
@keyframes scrollPulse{0%,100%{opacity:.4;transform:scaleY(.8)}50%{opacity:1;transform:scaleY(1)}}
@keyframes floatIcon{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}

/* ======= SCROLLBAR ======= */
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--gold-l);border-radius:3px}

/* ======= RESPONSIVE ======= */
@media(max-width:768px){
  .museum-nav{padding:0 16px;gap:12px}.nav-links{gap:12px}.nav-link{font-size:.58rem;letter-spacing:.06em}.nav-username{display:none}
  .page-header{padding:90px 20px 44px}
  .lt-serif{font-size:clamp(3.5rem,18vw,6rem)}.lt-script{font-size:clamp(2.5rem,12vw,4.5rem)}
  .timeline-line{left:18px}
  .timeline-item[data-side="left"],.timeline-item[data-side="right"]{justify-content:flex-start;padding-left:46px;padding-right:0;transform:translateX(18px)}
  .timeline-item.revealed{transform:translateX(0)}.timeline-dot{left:18px}.timeline-card{max-width:100%}
  .polaroid-board{padding:40px 20px 80px}.polaroid{width:160px}
  .map-wrap{grid-template-columns:1fr;grid-template-rows:auto 400px;margin:0 0 60px}
  .map-sidebar{border-right:none;border-bottom:1px solid var(--border)}
  #leafletMap{min-height:400px}
  .mp-bar{bottom:16px;left:12px}.mp-panel{width:260px}
  .letter-paper{padding:36px 28px 50px}
  .login-box{padding:30px 22px;margin:0 16px}
  .theme-fab{top:80px;right:12px}.theme-panel{right:12px}
}
@media(max-width:480px){
  .polaroid{width:140px;padding:10px 10px 42px}
  .mp-panel{width:calc(100vw - 24px)}
}